# C+++ 템플릿(template)

아래는 `template` 을 사용한 예제 코드이다.

```c++
#include <iostream>
#include <string>

template <typename T>
class Vector{
private:
    T* data;
    int size;
    int capacity;
public:
    Vector(int n = 1) : data(new T[n]), size(0), capacity(n){}
    ~Vector(){
        if(data != nullptr){
            delete[] data;
            data = nullptr;
        }
    }

    void push_back(T d){
        if(size >= capacity){
            T* temp = new T[capacity*2];
            for(int i = 0; i < size; i++) temp[i] = data[i];
            delete[] data;
            data = temp;
            capacity *= 2;
        }
        data[size++] = d;
    }

    void remove(const int x){
        if(x < 0 || x > size) return;
        for(int i = x+1; i < size; i++) data[i-1] = data[i];
        size--;
    }

    T operator[](const int i){
        return data[i];
    }

    int length() const { return size;}
};

int main() {
    Vector<int> int_vector;
    int_vector.push_back(0);
    int_vector.push_back(11);
    std::cout << int_vector[0] << std::endl;
    std::cout << int_vector[1] << std::endl;

    Vector<std::string> str_vector;
    str_vector.push_back("abcd");
    str_vector.push_back("defc");
    std::cout << str_vector[0] << std::endl;
    std::cout << str_vector[1] << std::endl;

}
```



## class T, typename T

`template<typename T>` 와 `template<class T>` 는 의미는 같지만 되도록이면 `typename` 키워드를 사용하는걸 권장한다.

```c++
Vector<int> 
```

 `<>` 안에 전달하려는 것을 명시해주면된다. 따라서 `Vector` 템플릿은 인자로 타입을 받게 된다. 위에 예제코드는 `T` 에 `int` 가 전달된다. 따라서 `T` 가 `int`로 치환된 클래스의 객체 `int_vector` 가 생성되는데, **클래스 템플릿에 인자를 전달해서 실제 코드를 생성하는 것을 클래스 템플릿 인스턴스화(class template instantitaion)** 이라고 한다.



## 템플릿 인스턴스화(class template instantitaion)

템플릿에 사용자가 원하는 타입을 템플릿 인자로 전달하면, 컴파일러는 그 인자를 바탕으로 코드를 생성하여 이를 컴파일 하게 된다. 하지만, 간혹 일부 타입은 다른 방식으로 처리해야 할 경가 있다. 그 에는 `bool`데이터 이다.

```c++
Vector<bool> bool_vector
```

문제는, C++에서 기본으로 처리하는 단위가 `1 byte` 이다. `bool`데이터 형은 `1 bit` 만으로도 충분히 저장할 수 있지만 8 비트를 사용해서 1개 `bool` 값을 저장하므로, 엄청난 메모리 낭비이여서 `Vector<bool>`같은 경우에는 특별히 따로 처리해줘야한다.



## 템플릿 특수화(template specialization)

```c++
template<>
class test<int, int, double>{};
```

전달하는 템플릿 인자가 없더라도 특수화 하고 싶다면 `template<>`라고 남겨줘도 된다.
